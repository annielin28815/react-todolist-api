{"ast":null,"code":"import _regeneratorRuntime from\"D:/personal/sideProject/react-todolist-page/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"D:/personal/sideProject/react-todolist-page/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"D:/personal/sideProject/react-todolist-page/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/personal/sideProject/react-todolist-page/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{NavLink}from'react-router-dom';import{useForm}from'react-hook-form';import Loading from'../../../components/Loading';import MySwal from'../../../components/Swql';import{RegisterApi}from'../../../global/todoApi';import FormInput from'./FormInput';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Register=function Register(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,formState=_useForm.formState;var errors=formState.errors;var fetchRegister=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user){var res,data,status,message,error,errorMsg,_iterator,_step,item;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return RegisterApi(user);case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;status=res.status;message=data.message,error=data.error;setLoading(false);if(status===201){MySwal.fire({toast:true,position:'top-end',icon:'success',showConfirmButton:false,timer:1500,timerProgressBar:true,title:message});}else if(status===422){errorMsg='';_iterator=_createForOfIteratorHelper(error);try{for(_iterator.s();!(_step=_iterator.n()).done;){item=_step.value;errorMsg+=item+' ';}}catch(err){_iterator.e(err);}finally{_iterator.f();}MySwal.fire({toast:true,position:'top-end',icon:'error',showConfirmButton:false,timer:1500,timerProgressBar:true,title:message,text:errorMsg});}case 11:case\"end\":return _context.stop();}}},_callee);}));return function fetchRegister(_x){return _ref.apply(this,arguments);};}();var formInputList=[{type:'text',id:'email',placeholder:'請輸入 Email',verify:{required:{value:true,message:'此欄位必填'},pattern:{value:/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g,message:'不符合 Email 規則'}},labelText:'Email'},{type:'text',id:'nickname',placeholder:'請輸入您的暱稱',verify:{required:{value:true,message:'此欄位必填'}},labelText:'您的暱稱'},{type:'password',id:'password',placeholder:'請輸入密碼',verify:{required:{value:true,message:'此欄位必填'},minLength:{value:6,message:'密碼 字數太少，至少需要 6 個字'}},labelText:'密碼'},{type:'text',id:'password2',placeholder:'請再次輸入密碼',verify:{required:{value:true,message:'此欄位必填'},validate:function validate(value){return value===watch('password','')||'兩次密碼輸入不同，請重新確認';}},labelText:'再次輸入密碼'}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"formControls\",onSubmit:handleSubmit(fetchRegister),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"formControls_txt\",children:\"\\u8A3B\\u518A\\u5E33\\u865F\"}),formInputList.map(function(item){return/*#__PURE__*/_jsx(FormInput,{item:item,register:register,errors:errors},item.id);}),/*#__PURE__*/_jsx(\"input\",{className:\"formControls_btnSubmit\",type:\"submit\",value:\"\\u8A3B\\u518A\\u5E33\\u865F\",disabled:Object.keys(errors).length>0}),/*#__PURE__*/_jsx(NavLink,{className:\"formControls_btnLink\",to:\"/login\",children:\"\\u767B\\u5165\"})]}),isLoading?/*#__PURE__*/_jsx(Loading,{}):'']});};export default Register;","map":{"version":3,"names":["useState","NavLink","useForm","Loading","MySwal","RegisterApi","FormInput","Register","isLoading","setLoading","register","handleSubmit","watch","formState","errors","fetchRegister","user","res","json","data","status","message","error","fire","toast","position","icon","showConfirmButton","timer","timerProgressBar","title","errorMsg","item","text","formInputList","type","id","placeholder","verify","required","value","pattern","labelText","minLength","validate","map","Object","keys","length"],"sources":["D:/personal/sideProject/react-todolist-page/src/pages/home/components/Register.js"],"sourcesContent":["import { useState } from 'react';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { useForm } from 'react-hook-form';\r\n\r\nimport Loading from '../../../components/Loading';\r\nimport MySwal from '../../../components/Swql';\r\n\r\nimport { RegisterApi } from '../../../global/todoApi';\r\n\r\nimport FormInput from './FormInput';\r\n\r\nconst Register = () => {\r\n    const [isLoading, setLoading] = useState(false);\r\n\r\n    const { register, handleSubmit, watch, formState } = useForm();\r\n\r\n    const { errors } = formState;\r\n\r\n    const fetchRegister = async (user) => {\r\n        setLoading(true);\r\n        const res = await RegisterApi(user);\r\n        const data = await res.json();\r\n\r\n        const { status } = res;\r\n        const { message, error } = data;\r\n\r\n        setLoading(false);\r\n\r\n        if (status === 201) {\r\n            MySwal.fire({\r\n                toast: true,\r\n                position: 'top-end',\r\n                icon: 'success',\r\n                showConfirmButton: false,\r\n                timer: 1500,\r\n                timerProgressBar: true,\r\n                title: message,\r\n            });\r\n        } else if (status === 422) {\r\n            let errorMsg = '';\r\n\r\n            for (const item of error) {\r\n                errorMsg += item + ' ';\r\n            }\r\n\r\n            MySwal.fire({\r\n                toast: true,\r\n                position: 'top-end',\r\n                icon: 'error',\r\n                showConfirmButton: false,\r\n                timer: 1500,\r\n                timerProgressBar: true,\r\n                title: message,\r\n                text: errorMsg,\r\n            });\r\n        }\r\n    };\r\n\r\n    const formInputList = [\r\n        {\r\n            type: 'text',\r\n            id: 'email',\r\n            placeholder: '請輸入 Email',\r\n            verify: {\r\n                required: { value: true, message: '此欄位必填' },\r\n                pattern: {\r\n                    value: /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g,\r\n                    message: '不符合 Email 規則',\r\n                },\r\n            },\r\n            labelText: 'Email',\r\n        },\r\n        {\r\n            type: 'text',\r\n            id: 'nickname',\r\n            placeholder: '請輸入您的暱稱',\r\n            verify: {\r\n                required: { value: true, message: '此欄位必填' },\r\n            },\r\n            labelText: '您的暱稱',\r\n        },\r\n        {\r\n            type: 'password',\r\n            id: 'password',\r\n            placeholder: '請輸入密碼',\r\n            verify: {\r\n                required: { value: true, message: '此欄位必填' },\r\n                minLength: {\r\n                    value: 6,\r\n                    message: '密碼 字數太少，至少需要 6 個字',\r\n                },\r\n            },\r\n            labelText: '密碼',\r\n        },\r\n        {\r\n            type: 'text',\r\n            id: 'password2',\r\n            placeholder: '請再次輸入密碼',\r\n            verify: {\r\n                required: { value: true, message: '此欄位必填' },\r\n                validate: (value) =>\r\n                    value === watch('password', '') ||\r\n                    '兩次密碼輸入不同，請重新確認',\r\n            },\r\n            labelText: '再次輸入密碼',\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            <form\r\n                className='formControls'\r\n                onSubmit={handleSubmit(fetchRegister)}\r\n            >\r\n                <h2 className='formControls_txt'>註冊帳號</h2>\r\n                {formInputList.map((item) => (\r\n                    <FormInput\r\n                        key={item.id}\r\n                        item={item}\r\n                        register={register}\r\n                        errors={errors}\r\n                    />\r\n                ))}\r\n                <input\r\n                    className='formControls_btnSubmit'\r\n                    type='submit'\r\n                    value='註冊帳號'\r\n                    disabled={Object.keys(errors).length > 0}\r\n                />\r\n                <NavLink className='formControls_btnLink' to='/login'>\r\n                    登入\r\n                </NavLink>\r\n            </form>\r\n            {isLoading ? <Loading /> : ''}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Register;"],"mappings":"4iBAAA,OAASA,QAAT,KAAyB,OAAzB,CAEA,OAASC,OAAT,KAAwB,kBAAxB,CAEA,OAASC,OAAT,KAAwB,iBAAxB,CAEA,MAAOC,QAAP,KAAoB,6BAApB,CACA,MAAOC,OAAP,KAAmB,0BAAnB,CAEA,OAASC,WAAT,KAA4B,yBAA5B,CAEA,MAAOC,UAAP,KAAsB,aAAtB,C,6IAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACnB,cAAgCP,QAAQ,CAAC,KAAD,CAAxC,wCAAOQ,SAAP,eAAkBC,UAAlB,eAEA,aAAqDP,OAAO,EAA5D,CAAQQ,QAAR,UAAQA,QAAR,CAAkBC,YAAlB,UAAkBA,YAAlB,CAAgCC,KAAhC,UAAgCA,KAAhC,CAAuCC,SAAvC,UAAuCA,SAAvC,CAEA,GAAQC,OAAR,CAAmBD,SAAnB,CAAQC,MAAR,CAEA,GAAMC,cAAa,4FAAG,iBAAOC,IAAP,oLAClBP,UAAU,CAAC,IAAD,CAAV,CADkB,sBAEAJ,YAAW,CAACW,IAAD,CAFX,QAEZC,GAFY,qCAGCA,IAAG,CAACC,IAAJ,EAHD,QAGZC,IAHY,eAKVC,MALU,CAKCH,GALD,CAKVG,MALU,CAMVC,OANU,CAMSF,IANT,CAMVE,OANU,CAMDC,KANC,CAMSH,IANT,CAMDG,KANC,CAQlBb,UAAU,CAAC,KAAD,CAAV,CAEA,GAAIW,MAAM,GAAK,GAAf,CAAoB,CAChBhB,MAAM,CAACmB,IAAP,CAAY,CACRC,KAAK,CAAE,IADC,CAERC,QAAQ,CAAE,SAFF,CAGRC,IAAI,CAAE,SAHE,CAIRC,iBAAiB,CAAE,KAJX,CAKRC,KAAK,CAAE,IALC,CAMRC,gBAAgB,CAAE,IANV,CAORC,KAAK,CAAET,OAPC,CAAZ,EASH,CAVD,IAUO,IAAID,MAAM,GAAK,GAAf,CAAoB,CACnBW,QADmB,CACR,EADQ,sCAGJT,KAHI,MAGvB,+CAA0B,CAAfU,IAAe,aACtBD,QAAQ,EAAIC,IAAI,CAAG,GAAnB,CACH,CALsB,qDAOvB5B,MAAM,CAACmB,IAAP,CAAY,CACRC,KAAK,CAAE,IADC,CAERC,QAAQ,CAAE,SAFF,CAGRC,IAAI,CAAE,OAHE,CAIRC,iBAAiB,CAAE,KAJX,CAKRC,KAAK,CAAE,IALC,CAMRC,gBAAgB,CAAE,IANV,CAORC,KAAK,CAAET,OAPC,CAQRY,IAAI,CAAEF,QARE,CAAZ,EAUH,CArCiB,uDAAH,kBAAbhB,cAAa,4CAAnB,CAwCA,GAAMmB,cAAa,CAAG,CAClB,CACIC,IAAI,CAAE,MADV,CAEIC,EAAE,CAAE,OAFR,CAGIC,WAAW,CAAE,WAHjB,CAIIC,MAAM,CAAE,CACJC,QAAQ,CAAE,CAAEC,KAAK,CAAE,IAAT,CAAenB,OAAO,CAAE,OAAxB,CADN,CAEJoB,OAAO,CAAE,CACLD,KAAK,CAAE,mCADF,CAELnB,OAAO,CAAE,cAFJ,CAFL,CAJZ,CAWIqB,SAAS,CAAE,OAXf,CADkB,CAclB,CACIP,IAAI,CAAE,MADV,CAEIC,EAAE,CAAE,UAFR,CAGIC,WAAW,CAAE,SAHjB,CAIIC,MAAM,CAAE,CACJC,QAAQ,CAAE,CAAEC,KAAK,CAAE,IAAT,CAAenB,OAAO,CAAE,OAAxB,CADN,CAJZ,CAOIqB,SAAS,CAAE,MAPf,CAdkB,CAuBlB,CACIP,IAAI,CAAE,UADV,CAEIC,EAAE,CAAE,UAFR,CAGIC,WAAW,CAAE,OAHjB,CAIIC,MAAM,CAAE,CACJC,QAAQ,CAAE,CAAEC,KAAK,CAAE,IAAT,CAAenB,OAAO,CAAE,OAAxB,CADN,CAEJsB,SAAS,CAAE,CACPH,KAAK,CAAE,CADA,CAEPnB,OAAO,CAAE,mBAFF,CAFP,CAJZ,CAWIqB,SAAS,CAAE,IAXf,CAvBkB,CAoClB,CACIP,IAAI,CAAE,MADV,CAEIC,EAAE,CAAE,WAFR,CAGIC,WAAW,CAAE,SAHjB,CAIIC,MAAM,CAAE,CACJC,QAAQ,CAAE,CAAEC,KAAK,CAAE,IAAT,CAAenB,OAAO,CAAE,OAAxB,CADN,CAEJuB,QAAQ,CAAE,kBAACJ,KAAD,QACNA,MAAK,GAAK5B,KAAK,CAAC,UAAD,CAAa,EAAb,CAAf,EACA,gBAFM,EAFN,CAJZ,CAUI8B,SAAS,CAAE,QAVf,CApCkB,CAAtB,CAkDA,mBACI,wCACI,cACI,SAAS,CAAC,cADd,CAEI,QAAQ,CAAE/B,YAAY,CAACI,aAAD,CAF1B,wBAII,WAAI,SAAS,CAAC,kBAAd,sCAJJ,CAKKmB,aAAa,CAACW,GAAd,CAAkB,SAACb,IAAD,qBACf,KAAC,SAAD,EAEI,IAAI,CAAEA,IAFV,CAGI,QAAQ,CAAEtB,QAHd,CAII,MAAM,CAAEI,MAJZ,EACSkB,IAAI,CAACI,EADd,CADe,EAAlB,CALL,cAaI,cACI,SAAS,CAAC,wBADd,CAEI,IAAI,CAAC,QAFT,CAGI,KAAK,CAAC,0BAHV,CAII,QAAQ,CAAEU,MAAM,CAACC,IAAP,CAAYjC,MAAZ,EAAoBkC,MAApB,CAA6B,CAJ3C,EAbJ,cAmBI,KAAC,OAAD,EAAS,SAAS,CAAC,sBAAnB,CAA0C,EAAE,CAAC,QAA7C,0BAnBJ,GADJ,CAwBKxC,SAAS,cAAG,KAAC,OAAD,IAAH,CAAiB,EAxB/B,GADJ,CA4BH,CA7HD,CA+HA,cAAeD,SAAf"},"metadata":{},"sourceType":"module"}